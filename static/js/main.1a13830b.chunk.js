(this["webpackJsonpgoogle-books"]=this["webpackJsonpgoogle-books"]||[]).push([[0],{19:function(e,t,o){},20:function(e,t,o){},22:function(e,t,o){},23:function(e,t,o){},24:function(e,t,o){"use strict";o.r(t);var n=o(9),c=o.n(n),s=o(3),a=o.n(s),r=o(8),i=o(5),l=o(2),u=o(1),j=o.n(u);function d(e,t,o,n,c){return b.apply(this,arguments)}function b(){return(b=Object(i.a)(a.a.mark((function e(t,o,n,c,s){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(t,"+subject:").concat(n,"&orderBy=").concat(o,"&startIndex=").concat(c,"&maxResults=").concat(s)).then((function(e){return e.json()}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=Object(i.a)(a.a.mark((function e(t){var o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.googleapis.com/books/v1/volumes/".concat(t)).then((function(e){return e.json()}));case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}o(19),o(20);var p=o(0),v=function(e){var t,o,n,c=e.book,s=e.changePage,a=e.bookSelection,r=c.volumeInfo;return Object(p.jsxs)("div",{className:"BookCard",children:[Object(p.jsx)("div",{children:Object(p.jsx)("a",{href:r.previewLink,target:"_blank",rel:"noreferrer",className:"BookCard__link",children:Object(p.jsx)("img",{title:"Search in google books",className:"BookCard__img",src:(null===(t=r.imageLinks)||void 0===t?void 0:t.thumbnail)||"https://ruslania.com/pictures/books_photos/30/309288/9785917615868_l.jpg",alt:"Book cover"})})}),Object(p.jsxs)("div",{className:"BookCard__info",children:[Object(p.jsx)("p",{className:"BookCard__info--category",children:(null===(o=r.categories)||void 0===o?void 0:o.filter((function(e){return e[0]})))||"No category"}),Object(p.jsx)("h3",{className:"BookCard__info--title",title:"More about the book",onClick:function(){s(),a(c)},children:r.title}),Object(p.jsx)("p",{className:"BookCard__info--autor",children:null===(n=r.authors)||void 0===n?void 0:n.map((function(e){return e})).join(", ")})]})]})},m=(o(22),function(e){var t,o,n,c,s,a,r,i=e.changePage,j=e.book,d=Object(u.useState)({}),b=Object(l.a)(d,2),v=b[0],m=b[1];Object(u.useEffect)((function(){(function(e){return h.apply(this,arguments)})(j.id).then((function(e){return m(e)}))}),[j.id]);var O=null===(t=v.volumeInfo)||void 0===t?void 0:t.imageLinks,f=(null===O||void 0===O?void 0:O.medium)||(null===O||void 0===O?void 0:O.small)||(null===O||void 0===O?void 0:O.smallThumbnail)||(null===O||void 0===O?void 0:O.thumbnail);return Object(p.jsxs)("div",{className:"CurrentBook",children:[Object(p.jsx)("h2",{className:"CurrentBook__title",onClick:i,children:"Return to books list"}),Object(p.jsxs)("div",{className:"CurrentBook__book",children:[Object(p.jsx)("img",{className:"CurrentBook__book--img",src:f||"https://ruslania.com/pictures/books_photos/30/309288/9785917615868_l.jpg",alt:"Book cover"}),Object(p.jsxs)("div",{className:"CurrentBook__info",children:[Object(p.jsx)("div",{className:"CurrentBook__info--details",children:null===(o=v.volumeInfo)||void 0===o||null===(n=o.categories)||void 0===n?void 0:n.map((function(e){return e})).join(", ")}),Object(p.jsx)("h2",{children:null===(c=v.volumeInfo)||void 0===c?void 0:c.title}),Object(p.jsx)("div",{className:"CurrentBook__info--details",children:null===(s=v.volumeInfo)||void 0===s||null===(a=s.authors)||void 0===a?void 0:a.map((function(e){return e})).join(" / ")}),Object(p.jsx)("div",{className:"CurrentBook__info--description",dangerouslySetInnerHTML:{__html:null===(r=v.volumeInfo)||void 0===r?void 0:r.description}})]})]})]})}),O=function(e){var t=e.allBook,o=e.showMessage,n=e.totalBook,c=e.getBook,s=e.setLoad,a=Object(u.useState)({}),r=Object(l.a)(a,2),i=r[0],j=r[1],d=Object(u.useState)("list"),b=Object(l.a)(d,2),h=b[0],O=b[1],f=function(){O("book")},k=function(e){j(e)};return Object(p.jsxs)("div",{className:"BookList",children:[o&&Object(p.jsx)("h2",{className:"BookList__count",children:n>0?"Found ".concat(n," results"):"Not found any book"}),"list"===h&&Object(p.jsxs)("div",{children:[Object(p.jsx)("ul",{className:"BookList__list",children:t&&t.map((function(e){return Object(p.jsx)("li",{className:"BookList__list--item",children:Object(p.jsx)(v,{book:e,changePage:f,bookSelection:k})},e.id)}))}),Object(p.jsx)("div",{className:"BookList__pagination",children:t&&t.length&&Object(p.jsx)("button",{type:"button",className:"BookList__pagination--button",onClick:function(){s("load"),c(t.length)},children:"Load more"})})]}),"book"===h&&Object(p.jsx)(m,{changePage:function(){O("list")},book:i})]})},f=(o(23),function(e){var t=e.searchBook,o=e.setSearchBook,n=e.selectedCategory,c=e.setSelectedCategory,s=e.sortBy,a=e.setSortBy,r=e.getBook,i=e.totalBook,l=e.setLoad,u=e.setShowMessage;return Object(p.jsxs)("div",{children:[Object(p.jsxs)("form",{className:"App__form",onSubmit:function(e){e.preventDefault(),o("")},children:[Object(p.jsx)("input",{type:"text",className:"App__form--item App__input",placeholder:"Search book",value:t,onChange:function(e){o(e.target.value)}}),Object(p.jsxs)("div",{children:["Categories ",Object(p.jsxs)("select",{value:n,onChange:function(e){c(e.target.value)},className:"App__form--item",children:[Object(p.jsx)("option",{value:"",children:"All"}),Object(p.jsx)("option",{value:"art",children:"Art"}),Object(p.jsx)("option",{value:"biography",children:"Biography"}),Object(p.jsx)("option",{value:"computers",children:"Computers"}),Object(p.jsx)("option",{value:"history",children:"History"}),Object(p.jsx)("option",{value:"medical",children:"Medical"}),Object(p.jsx)("option",{value:"poetry",children:"Poetry"})]})]}),Object(p.jsxs)("div",{children:["Sorting by ",Object(p.jsxs)("select",{value:s,onChange:function(e){a(e.target.value)},className:"App__form--item",children:[Object(p.jsx)("option",{value:"relevance",children:"Relevance"}),Object(p.jsx)("option",{value:"newest",children:"Newest"})]})]}),Object(p.jsx)("button",{className:"App__form--item",onClick:function(){r(),u(!0),l("load")},children:"Search"})]}),i>0&&Object(p.jsx)("a",{href:"#root",className:"App__buttonUp",children:"\u2191"})]})}),k=function(){var e=Object(u.useState)(""),t=Object(l.a)(e,2),o=t[0],n=t[1],c=Object(u.useState)([]),s=Object(l.a)(c,2),j=s[0],b=s[1],h=Object(u.useState)(""),v=Object(l.a)(h,2),m=v[0],k=v[1],_=Object(u.useState)(""),g=Object(l.a)(_,2),x=g[0],B=g[1],N=Object(u.useState)("relevance"),y=Object(l.a)(N,2),C=y[0],S=y[1],w=Object(u.useState)(""),A=Object(l.a)(w,2),L=A[0],I=A[1],M=Object(u.useState)(!1),P=Object(l.a)(M,2),R=P[0],D=P[1],E=function(){var e=Object(i.a)(a.a.mark((function e(){var t,o,c,s=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:0,o=s.length>1&&void 0!==s[1]?s[1]:30,e.next=4,d(m,C,x,t,o);case 4:(c=e.sent)&&I("finish"),t?b([].concat(Object(r.a)(j),Object(r.a)(c.items))):(b(c.items),n(c.totalItems));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsxs)("div",{className:"App__header",children:[Object(p.jsx)("h1",{className:"App__title",children:"Search for books"}),Object(p.jsx)(f,{searchBook:m,setSearchBook:k,selectedCategory:x,setSelectedCategory:B,sortBy:C,setSortBy:S,getBook:E,totalBook:o,setLoad:I,setShowMessage:D})]}),"load"===L&&Object(p.jsx)("div",{className:"App__preloader",children:Object(p.jsx)("div",{className:"App__preloader--loader"})}),"finish"===L&&Object(p.jsx)(O,{allBook:j,showMessage:R,totalBook:o,getBook:E,setLoad:I})]})},_=o(10),g=o(11),x=o(13),B=o(12),N=function(e){Object(x.a)(o,e);var t=Object(B.a)(o);function o(){var e;Object(_.a)(this,o);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={error:null},e}return Object(g.a)(o,[{key:"componentDidMount",value:function(){this.state.error&&this.setState({error:"error"})}},{key:"render",value:function(){return this.state.error?Object(p.jsx)("h1",{children:"Somethind went wrong"}):this.props.children}}]),o}(j.a.Component),y=N;c.a.render(Object(p.jsx)(y,{children:Object(p.jsx)(k,{})}),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.1a13830b.chunk.js.map