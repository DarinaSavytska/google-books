(this["webpackJsonpgoogle-books"]=this["webpackJsonpgoogle-books"]||[]).push([[0],[,,,,,,,,,,,,function(e,t,o){},function(e,t,o){},,function(e,t,o){},function(e,t,o){},function(e,t,o){"use strict";o.r(t);var n=o(6),s=o.n(n),c=o(3),a=o.n(c),r=o(4),i=o(2),l=o(1);function u(e,t,o,n){return j.apply(this,arguments)}function j(){return(j=Object(r.a)(a.a.mark((function e(t,o,n,s){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(t,"+subject:").concat(n,"&orderBy=").concat(o,"&startIndex=").concat(s,"&maxResults=30")).then((function(e){return e.json()}));case 2:return c=e.sent,e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=Object(r.a)(a.a.mark((function e(t){var o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.googleapis.com/books/v1/volumes/".concat(t)).then((function(e){return e.json()}));case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}o(12),o(13);var b=o(0),h=function(e){var t,o,n,s=e.book,c=e.changePage,a=e.bookSelection,r=s.volumeInfo;return Object(b.jsxs)("div",{className:"BookCard",children:[Object(b.jsx)("div",{children:Object(b.jsx)("a",{href:r.previewLink,target:"_blank",rel:"noreferrer",className:"BookCard__link",children:Object(b.jsx)("img",{title:"Search in google books",className:"BookCard__img",src:(null===(t=r.imageLinks)||void 0===t?void 0:t.thumbnail)||"https://ruslania.com/pictures/books_photos/30/309288/9785917615868_l.jpg",alt:"Book cover"})})}),Object(b.jsxs)("div",{className:"BookCard__info",children:[Object(b.jsx)("p",{className:"BookCard__info--category",children:(null===(o=r.categories)||void 0===o?void 0:o.filter((function(e){return e[0]})))||"No category"}),Object(b.jsx)("h3",{className:"BookCard__info--title",title:"More about the book",onClick:function(){c(),a(s)},children:r.title}),Object(b.jsx)("p",{className:"BookCard__info--autor",children:null===(n=r.authors)||void 0===n?void 0:n.map((function(e){return e})).join(", ")})]})]})},p=(o(15),function(e){var t,o,n,s,c,a,r,u=e.changePage,j=e.book,h=Object(l.useState)({}),p=Object(i.a)(h,2),v=p[0],m=p[1];Object(l.useEffect)((function(){(function(e){return d.apply(this,arguments)})(j.id).then((function(e){return m(e)}))}),[j.id]);var f=null===(t=v.volumeInfo)||void 0===t?void 0:t.imageLinks,O=(null===f||void 0===f?void 0:f.medium)||(null===f||void 0===f?void 0:f.small)||(null===f||void 0===f?void 0:f.smallThumbnail)||(null===f||void 0===f?void 0:f.thumbnail);return Object(b.jsxs)("div",{className:"CurrentBook",children:[Object(b.jsx)("h2",{className:"CurrentBook__title",onClick:u,children:"Return to books list"}),Object(b.jsxs)("div",{className:"CurrentBook__book",children:[Object(b.jsx)("img",{className:"CurrentBook__book--img",src:O||"https://ruslania.com/pictures/books_photos/30/309288/9785917615868_l.jpg",alt:"Book cover"}),Object(b.jsxs)("div",{className:"CurrentBook__info",children:[Object(b.jsx)("div",{className:"CurrentBook__info--details",children:null===(o=v.volumeInfo)||void 0===o||null===(n=o.categories)||void 0===n?void 0:n.map((function(e){return e})).join(", ")}),Object(b.jsx)("h2",{children:null===(s=v.volumeInfo)||void 0===s?void 0:s.title}),Object(b.jsx)("div",{className:"CurrentBook__info--details",children:null===(c=v.volumeInfo)||void 0===c||null===(a=c.authors)||void 0===a?void 0:a.map((function(e){return e})).join(" / ")}),Object(b.jsx)("div",{className:"CurrentBook__info--description",dangerouslySetInnerHTML:{__html:null===(r=v.volumeInfo)||void 0===r?void 0:r.description}})]})]})]})}),v=function(e){var t=e.allBook,o=e.showMessage,n=e.totalBook,s=(e.setPage,e.page,e.getBook),c=e.setLoad,a=Object(l.useState)({}),r=Object(i.a)(a,2),u=r[0],j=r[1],d=Object(l.useState)("list"),v=Object(i.a)(d,2),m=v[0],f=v[1],O=function(){f("book")},k=function(e){j(e)};return Object(b.jsxs)("div",{className:"BookList",children:[o&&Object(b.jsx)("h2",{className:"BookList__count",children:n>0?"Found ".concat(n," results"):"Not found any book"}),"list"===m&&Object(b.jsxs)("div",{children:[Object(b.jsx)("ul",{className:"BookList__list",children:t&&t.map((function(e){return Object(b.jsx)("li",{className:"BookList__list--item",children:Object(b.jsx)(h,{book:e,changePage:O,bookSelection:k})},e.id)}))}),Object(b.jsx)("div",{className:"BookList__pagination",children:Object(b.jsx)("button",{type:"button",className:"BookList__pagination--button",onClick:function(){c("load"),s()},children:"Next page"})})]}),"book"===m&&Object(b.jsx)(p,{changePage:function(){f("list")},book:u})]})},m=(o(16),function(e){var t=e.searchBook,o=e.setSearchBook,n=e.selectedCategory,s=e.setSelectedCategory,c=e.sortBy,a=e.setSortBy,r=e.getBook,i=e.totalBook,l=e.setLoad,u=e.setShowMessage,j=e.setPage;return Object(b.jsxs)("div",{children:[Object(b.jsxs)("form",{className:"App__form",onSubmit:function(e){e.preventDefault()},children:[Object(b.jsx)("input",{type:"text",className:"App__form--item App__input",placeholder:"Search book",value:t,onChange:function(e){o(e.target.value)}}),Object(b.jsxs)("div",{children:["Categories ",Object(b.jsxs)("select",{value:n,onChange:function(e){s(e.target.value)},className:"App__form--item",children:[Object(b.jsx)("option",{value:"",children:"All"}),Object(b.jsx)("option",{value:"art",children:"Art"}),Object(b.jsx)("option",{value:"biography",children:"Biography"}),Object(b.jsx)("option",{value:"computers",children:"Computers"}),Object(b.jsx)("option",{value:"history",children:"History"}),Object(b.jsx)("option",{value:"medical",children:"Medical"}),Object(b.jsx)("option",{value:"poetry",children:"Poetry"})]})]}),Object(b.jsxs)("div",{children:["Sorting by ",Object(b.jsxs)("select",{value:c,onChange:function(e){a(e.target.value)},className:"App__form--item",children:[Object(b.jsx)("option",{value:"relevance",children:"Relevance"}),Object(b.jsx)("option",{value:"newest",children:"Newest"})]})]}),Object(b.jsx)("button",{className:"App__form--item",onClick:function(){r(),u(!0),l("load"),j(-30)},children:"Search"})]}),i>0&&Object(b.jsx)("a",{href:"#root",className:"App__buttonUp",children:"\u2191"})]})}),f=function(){var e=Object(l.useState)(""),t=Object(i.a)(e,2),o=t[0],n=t[1],s=Object(l.useState)([]),c=Object(i.a)(s,2),j=c[0],d=c[1],h=Object(l.useState)("The Google Story (2018 Updated Edition)"),p=Object(i.a)(h,2),f=p[0],O=p[1],k=Object(l.useState)(""),g=Object(i.a)(k,2),_=g[0],x=g[1],B=Object(l.useState)("relevance"),N=Object(i.a)(B,2),y=N[0],S=N[1],C=Object(l.useState)(""),w=Object(i.a)(C,2),A=w[0],L=w[1],I=Object(l.useState)(!1),P=Object(i.a)(I,2),M=P[0],E=P[1],R=Object(l.useState)(0),T=Object(i.a)(R,2),H=T[0],J=T[1];console.log(H);var U=function(){var e=Object(r.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(f,y,_,H);case 2:(t=e.sent)&&L("finish"),J((function(e){return e+30})),d(t.items),n(t.totalItems);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsxs)("div",{className:"App__header",children:[Object(b.jsx)("h1",{className:"App__title",children:"Search for books"}),Object(b.jsx)(m,{searchBook:f,setSearchBook:O,selectedCategory:_,setSelectedCategory:x,sortBy:y,setSortBy:S,getBook:U,totalBook:o,setLoad:L,setShowMessage:E,setPage:J})]}),"load"===A&&Object(b.jsx)("div",{className:"App__preloader",children:Object(b.jsx)("div",{className:"App__preloader--loader"})}),"finish"===A&&Object(b.jsx)(v,{allBook:j,showMessage:M,totalBook:o,page:H,setPage:J,getBook:U,setLoad:L})]})};s.a.render(Object(b.jsx)(f,{}),document.getElementById("root"))}],[[17,1,2]]]);
//# sourceMappingURL=main.b9a48ef7.chunk.js.map